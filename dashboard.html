<!doctype html>
<html>
<head><meta charset="utf-8"><title>Dashboard</title></head>
<body>
  <h2>Dashboard</h2>
  <div>
    <p>Name: <span id="name">-</span></p>
    <p>Email: <span id="email">-</span></p>
    <p>Role: <span id="role">-</span></p>
  </div>
  <button id="logout">Logout</button>
  <script>
    const API = 'http://localhost:5000';
    const token = localStorage.getItem('accessToken');
    if (!token) { alert('Not logged in'); window.location.href='login.html'; }
    async function load() {
      const res = await fetch(API + '/api/auth/profile', { headers: { Authorization: 'Bearer ' + token }});
      if (!res.ok) { alert('Session expired'); localStorage.removeItem('accessToken'); window.location.href='login.html'; return; }
      const data = await res.json();
      document.getElementById('name').innerText = data.name;
      document.getElementById('email').innerText = data.email;
      document.getElementById('role').innerText = data.role;
    }
    document.getElementById('logout').addEventListener('click', () => {
      localStorage.removeItem('accessToken'); localStorage.removeItem('refreshToken'); window.location.href='login.html';
    });
    load();
  </script>
</body>
</html>
